<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üîë ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />

<style>
body {
  font-family: 'Inter', sans-serif;
  background: radial-gradient(circle at top left, #0f172a, #020617 70%);
  color: #e0e0e0;
}
.glass {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.1);
}
.neon-border {
  border: 1px solid transparent;
  background-clip: padding-box;
  box-shadow: 0 0 12px rgba(59,130,246,0.6),
              0 0 24px rgba(168,85,247,0.5);
}
.pulse { animation: pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.6;} }
.error-border { border-color: #f87171 !important; }
.group { position: relative; flex: 1; }
.group input {
  width: 100%;
  padding: 12px 10px 8px 5px;
  border: none;
  border-bottom: 1px solid #666;
  background: transparent;
  color: #e0e0e0;
  outline: none;
}
.group label {
  position: absolute;
  left: 5px;
  top: 12px;
  color: #aaa;
  font-size: 16px;
  pointer-events: none;
  transition: 0.2s ease all;
}
.group input:focus ~ label,
.group input:not(:placeholder-shown) ~ label {
  top: -10px;
  font-size: 14px;
  color: #a855f7;
}
input[type="password"]:focus {
  border-width: 2px;
  border-bottom-color: #a855f7;
}
</style>
</head>
<body class="flex items-center justify-center min-h-screen">

<div class="w-full max-w-md glass neon-border rounded-2xl shadow-xl p-8 relative">
  <div class="absolute -top-8 -right-8 w-24 h-24 bg-purple-600/30 rounded-full blur-3xl pulse"></div>

  <h2 class="text-3xl font-bold text-center mb-6 bg-gradient-to-r from-cyan-400 via-purple-400 to-blue-500 bg-clip-text text-transparent drop-shadow-lg">
    ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
  </h2>

  <form method="POST" onsubmit="return validateForm(event);" class="space-y-4" novalidate>
    <!-- Password -->
    <div class="mb-4 relative">
      <div class="flex items-center">
        <span class="text-red-500 text-lg mr-2 flex-shrink-0">*</span>
        <div class="group">
          <input type="password" id="password" name="password" placeholder=" " required />
          <label for="password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
        </div>
        <button type="button" class="absolute right-3 text-gray-300" onclick="togglePassword('password', this)">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7S3.732 16.057 2.458 12z" />
          </svg>
        </button>
      </div>
      <div id="password-error" class="text-sm text-red-400 hidden mt-1 ml-6"></div>
    </div>

    <!-- Confirm Password -->
    <div class="mb-4 relative">
      <div class="flex items-center">
        <span class="text-red-500 text-lg mr-2 flex-shrink-0">*</span>
        <div class="group">
          <input type="password" id="confirm_password" name="confirm_password" placeholder=" " required />
          <label for="confirm_password">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
        </div>
        <button type="button" class="absolute right-3 text-gray-300" onclick="togglePassword('confirm_password', this)">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7S3.732 16.057 2.458 12z" />
          </svg>
        </button>
      </div>
      <div id="confirm-error" class="text-sm text-red-400 hidden mt-1 ml-6"></div>
    </div>

    {% if message %}
    <div class="text-sm text-red-400 mb-2">{{ message }}</div>
    {% endif %}

    <input type="submit" value="‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà"
           class="w-full py-2 bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-semibold rounded-lg shadow-lg hover:opacity-80 transition cursor-pointer" />
  </form>

  <p class="text-sm flex justify-between mt-4">
    <a href="/login" class="text-purple-400 hover:underline">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
    <a href="/forgot-password" class="text-purple-400 hover:underline">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</a>
  </p>
</div>

<script>
const passwordInput = document.getElementById("password");
const confirmInput = document.getElementById("confirm_password");
const passwordError = document.getElementById("password-error");
const confirmError = document.getElementById("confirm-error");

function showError(input, errorDiv, msg){
  input.classList.add("error-border");
  errorDiv.textContent = msg;
  errorDiv.classList.remove("hidden");
}
function hideError(input, errorDiv){
  input.classList.remove("error-border");
  errorDiv.classList.add("hidden");
}

function validatePasswordComplexity(pwd) {
  if (!pwd) return "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô";

  const invalidCheck = /[^a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(pwd);
  if (invalidCheck) return "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà a-z, A-Z, 0-9 ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î";

  const lengthCheck = pwd.length >= 8;
  const lowerCheck = /[a-z]/.test(pwd);
  const upperCheck = /[A-Z]/.test(pwd);
  const numberCheck = /[0-9]/.test(pwd);
  const specialCheck = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(pwd);

  if (!lengthCheck) return "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£";
  if (!lowerCheck) return "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß";
  if (!upperCheck) return "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß";
  if (!numberCheck) return "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß";
  if (!specialCheck) return "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢/‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß";

  return ""; // ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
}

passwordInput.addEventListener("blur", () => {
  const msg = validatePasswordComplexity(passwordInput.value);
  if(msg) showError(passwordInput, passwordError, msg); 
  else hideError(passwordInput, passwordError);

  if(confirmInput.value) checkPasswordMatch();
});

confirmInput.addEventListener("blur", checkPasswordMatch);

function checkPasswordMatch() {
  const pwd = passwordInput.value;
  const confirm = confirmInput.value;

  // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï error ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á
  hideError(passwordInput, passwordError);
  hideError(confirmInput, confirmError);

  // ‡∏ñ‡πâ‡∏≤ password ‡∏ß‡πà‡∏≤‡∏á ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô
  if (!pwd) {
    showError(passwordInput, passwordError, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô");
  } else {
    const msg = validatePasswordComplexity(pwd);
    if (msg) showError(passwordInput, passwordError, msg);
  }

  // ‡∏ñ‡πâ‡∏≤ confirm ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö password ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡∏î‡πâ‡∏≤‡∏ô confirm
  if (confirm && pwd !== confirm) {
    showError(confirmInput, confirmError, "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
  }
}

function togglePassword(id, btn){
  const input = document.getElementById(id);
  const isPwd = input.type === "password";
  input.type = isPwd ? "text" : "password";

  btn.innerHTML = isPwd
    ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
               d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.05 10.05 0 012.223-3.676M6.477 6.477A9.956 9.956 0 0112 5c4.478 0 8.268 2.943 9.542 7a10.05 10.05 0 01-1.373 2.53M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
               d="M3 3l18 18" />
       </svg>`
    : `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
               d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
               d="M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7S3.732 16.057 2.458 12z" />
       </svg>`;
}

function validateForm(e){
  e.preventDefault();
  hideError(passwordInput, passwordError);
  hideError(confirmInput, confirmError);

  let valid = true;
  const pwdMsg = validatePasswordComplexity(passwordInput.value);
  if(pwdMsg){ showError(passwordInput, passwordError, pwdMsg); valid=false; }
  if(confirmInput.value !== passwordInput.value){ showError(confirmInput, confirmError, "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô"); valid=false; }

  if(valid) e.target.submit();
}

  setTimeout(() => {
    const msg = document.getElementById('server-message');
    if(msg) msg.remove();
  }, 5000);

</script>

</body>
</html>
